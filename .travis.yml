language: node_js
cache: yarn
matrix:
  include:
  - node_js: '8'
    env: RUN_SNYK=true
  - node_js: '10'
  - node_js: node
script:
- yarn lint
- yarn test --coverage
- yarn prettier:ci
- yarn build
before_install:
- if [[ $RUN_SNYK && $SNYK_TOKEN ]]; then npm install -g snyk; fi
install:
- if [[ $RUN_SNYK && $SNYK_TOKEN ]]; then snyk test --org=maxmind; fi
- yarn install
after_success:
- if [[ $TRAVIS_BRANCH == 'master' && $TRAVIS_PULL_REQUEST == 'false' && $RUN_SNYK
  && $SNYK_TOKEN ]]; then snyk monitor --org=maxmind --project-name=maxmind/minfraud-api-node;
  fi
env:
  global:
  - secure: n+jGPI5TN2L6l/28Ybgmk7ogbHVtaZB0dFWwxqIJDI0cSVJAI1zQGe2GgLpV8mweX70C5Ds6aNHgTSYsIUqOnqkiPNPuNlx3dHPYxjhk8utB6rTfgfmXEv9SNnZceOaDbR0XQaqHFmiAQB/TDbsqKTHk0fk3xb1YNsqlRS/NBGLcQwQuwzxS/MdXt5I9e8QcQEtNMD6OWphgOHXItr2T7ApJjaTli72c+mafV+cyPTgTM0O5+SiaG1JLrzW/VHjT/whet/2zMqNAJ3wzFv7H/v+jd9WuyeWQm8kqc+dBhIOaBnPK948yVKh6DWpa+lOvfgdSmFjzLXKPnovaM55wdnf7oZRWDnDaJoxvyCSCsc5pZn6lZRa+m4LSUtAfHKh+2661NdBIrMJouWfo5/c0BG14USIBzvF0FPBKAflNw4ci7zLZ3WlOFWmEvkPAlzcbisJRtMPK4+6VgRnzZ99hJS1TGB1e5FS52bDVpzdSrYIs92tD166T4IsDkRMz+8FvTcllzIQePpPvEZIR5W7UurIWdHPA2MyEuYqZytWPWF7G7Q7lWtA3g+uhhp7y3tZEkzqU8kMm0iPHNRto6LFfOY0QMcwl8NdwpebNakl3cJ/643E6X96JyfmAcMxStLodcPwMbNXmI2QIXZjmEgRAUXAB17KhSarnY1N6uQpcw7E=
