language: node_js
cache: yarn
matrix:
  include:
  - node_js: '8'
    env: RUN_SNYK=true
  - node_js: '10'
  - node_js: node
script:
- yarn lint
- yarn test --coverage
- yarn prettier:ci
- yarn build
before_install:
- if [[ $RUN_SNYK && $SNYK_TOKEN ]]; then npm install -g snyk; fi
install:
- if [[ $RUN_SNYK && $SNYK_TOKEN ]]; then snyk test --org=maxmind; fi
- yarn install
after_success:
- if [[ $TRAVIS_BRANCH == 'master' && $TRAVIS_PULL_REQUEST == 'false' && $RUN_SNYK
  && $SNYK_TOKEN ]]; then snyk monitor --org=maxmind --project-name=maxmind/minfraud-api-node;
  fi
env:
  global:
  - secure: DRxcXl1BxxB30fqgVCPbt/teM11dsdlhEImdORJ00527uBEQlWkBscYRvoUZx1naSes/XPSw9gbrJNv+64ZIZmvvaUAzmr3nez/22iJJR0bvv772xbyhQ8huGa1QAvi/cC/lnxqvm55x/IqANxmTWeQWr0mLwssebaozLrIao6jGFoo8kLn7yWsrRvW0LX/hlaOLpA02ixkSxMzUs6CUnXsTrOfBfL0fAQI6ck1fx2IoVkdnuvGlK2ouw1dLCU04P0sORrO+Ah9UdCYII8fTXZIhiI3Mb5SVZZWT972TgcehQJODPu0Mk7793FgRmvieqYEM94d1xOb0QRq2FznfV3q6bT3HRsox+A0pFG0PQmNokCt6oxesGeK4cPe3UTJ02QhIIMUCGub0oFRrmcAXrPHnX7jEwM6syMTy5ujK+zp8JS9PBJZALCfMb16705+OH0odxiikZHqQl237ibHnGbIfwWYdZmzVqPmKRCKgq6mnnuNR6I7AxroIdATldKBQdAW797ElXTq82R+10vsrnoK8Dnmsid6xB1xmhdHmOKMOpbNE9YCwwCeDsipQlmRKNRNMvB9z0cqGBM6ib8rO+9DywGb+QIIcN885SshOnBCpauMDXkx6+3kzaolLSurImmAb0YX1QALdKNMtZ9l/VSafAi4RRAS3lOl1hGn3C70=
